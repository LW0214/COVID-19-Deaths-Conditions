[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Conditions Contributing to COVID-19 Deaths",
    "section": "",
    "text": "1 Introduction\nAs of November 2023, coronavirus disease (COVID-19) had led to 1.2 million deaths in the United States, making it one of the most severe health crises in recent history. It has become increasingly evident that the fatality rate associated with COVID-19 is not uniform across populations, and is largely influenced by patient-specific factors. Age and underlying medical conditions have emerged as key determinants in increasing risk of mortality from COVID-19. A range of medical conditions such as heart conditions, respiratory diseases, diabetes and obesity. However, the extent of their impact varies and this project aims to investigate the influence of these comorbidities on COVID-19 mortality rates.\nThis project will delve into the following areas:\n\nTrend analysis over time\nTracing the trajectory of the pandemic over the span of 4 years, from 2020-2023, will shed light on the changing patterns of the virus.\nGeographical variation in covid-19 impact\nComparing state-wise data to explore how regional disparities influence outcomes\nAge related vulnerability\nExplore how different age groups have been impacted by the virus. This is vital in creating age-specific healthcare strategies and protective measures, especially for the older segments of the population.\nImpact of specific health conditions on covid-19 mortality rates\nThis aspect aims to identify which medical conditions correlate with mortality rates. Understanding this correlation allows for more effective medical interventions and prioritizing resources for high-risk groups.\n\nThrough the project, we aim to contribute a nuanced understanding of COVID-19. The findings are expected to offer valuable insights for healthcare professionals and policymakers in developing more effective strategies in managing future public health crises."
  },
  {
    "objectID": "data.html#technical-description",
    "href": "data.html#technical-description",
    "title": "2  Data",
    "section": "2.1 Technical description",
    "text": "2.1 Technical description\n\n2.1.1 Data Source and Collection Conditions\n\nContributing to COVID-19 Deaths, by State and Age, Provisional 2020-2023\nThe main dataset for this project is collected and managed by the NCHS as part of the National Vital Statistics System (NVSS). The NVSS compiles official death certificate data from various jurisdictions, including the 50 states, the District of Columbia, New York City, and 5 US territories. Death certificates, completed by funeral directors and certifiers, provide both demographic and death-related information, which is then coded using the International Classification of Diseases, Tenth Revision (ICD-10). COVID-19 deaths are specifically coded under ICD-10 code U071.\nSource: https://data.cdc.gov/NCHS/Conditions-Contributing-to-COVID-19-Deaths-by-Stat/hk9y-quqm\nSingle-Race Population Estimates 2020-2022 by State and Single-Year Age\nTo further our analysis, we will also be utilizing US population data obtained from CDC Wonder. CDC provides annual estimates of the population for each state in the United States, including demographic breakdowns by age. The CDC obtains population data by integrating various data sources and applying advanced statistical methodologies. The primary foundation is decennial census data, which offers a comprehensive snapshot of the US population. However, given the ten-year interval between censuses, the CDC supplements this with other data sources to capture more current population dynamics.\nSource: https://wonder.cdc.gov/single-race-population.html\n\n\n\n2.1.2 Data Format and Dimensions\nThe main dataset, last updated on September 27, 2023, contains approximately 621K rows, 14 columns. Each row details a COVID-19 death, categorized by age group, condition, jurisdiction, year and month. The dataset includes the following columns: “Date as of”, “Start Date”, “End Date”, “Group”, “Year”, “Month”, “State”, “Condition Group”, “Condition”, “ICD10_codes”, “Age Group”, “Covid-19 Deaths”, “Number of Mentions” and “Flag”.\n\n\n2.1.3 Breakdown of columns\n\nTypes in each column\nMost columns are categorical data, and the column “COVID.19.Deaths” are numerical data. The first 3 columns “Data.As.Of”, “Start.Date” and “End.Date” are timestamps.\nTime-related columns\nColumn “Year” and “Month” that indicates said time periods of death recorded, thus, the smallest granularity of time interval is month. “Group” column indicates by what time interval the deaths are recorded, whose values can be “by Total”, “by Month” and “by Year”. If an entry has Group=by Year and Year=2020, then its death count is the sum of all entries’ death count where Year=2020 and Group=by Month. Similarly, if an entry has Group=by total, then its death count is the sum over the entire period of the whole dataset.\nThe first column “Data As Of” can be dropped as all of them are “9/24/2023” which probably indicates the last date where any records are added to the database, especially since the last date in “End.Date” is “09/23/2023”. The other columns “Start.Date” and “End.Date” corresponds to “Group”, “Year” and “Month”. For example if group=by year, year=2020, then start.date=01/01/2020 and end.Date=12/31/2020. Thus, we decide that “Data As Of”, “Start.Date” and “End.Date” aren’t that useful as their information is already captured in more precise columns of “Group”, “Year” and “Month”.\nGeography-related columns\n“State” column indicates the geographical states of each record. Some has values “United States” which is already a sum of other states.\nMedical conditions columns\nThe columns “Condition groups”, “Conditions”, and “ICD10_codes” are categories and subcategories describing the contributors to death by COVID-19. There’s a condition named “Covid-19” which we believe indicates the actual covid-19 deaths as indicated by the name of the data source.\nAge-related column\nThere is one age-related column called the “Age Group”. There’s a value “All Ages” which is a sum of the other age groups.\nDeath-related columns\nThere are two death-related columns, “COVID-19 Deaths” and “Number of Mentions”. There’s little documentation about the difference between them, upon further research, we assume “Number of Mentions” may be the number of times a condition is mentioned on the death certificate, while “COVID-19 Deaths” is the number of times a condition is recorded as a contributor of death by the hospital.\n“Flag” column\nHas a value if the number of deaths is &lt;10. For said entries, “COVID-19 Deaths” and “Number of Mentions” are already suppressed to NAN values to be in accordance with NCHS confidentiality standards.\n\n\n\n2.1.4 Frequency of Updates\nData is created on 5/8/2022. Data is last updated by 9/27/2023, and this is the only update to the dataset. The dataset will no longer be updated. It’s also stated that data for 2022 and 2023 are provisional, while “Estimates for 2020 and 2021 are based on final data.”.\n\n\n2.1.5 Import\nWe imported the data by downloading its csv format and importing it to R.\n\n\n2.1.6 Issues\n\nDouble Counting of Deaths by Conditions\nDeath for different conditions can be double counted, for example, a person died from Covid may have both diabetes and obesity at their time of death, as the source notes that “​​To avoid counting the same death multiple times, the numbers for different conditions should not be summated.”\nDelay or Incomplete Data\nThe sources notes “2022 and 2023 data are provisional. Estimates for 2020 and 2021 are based on final data.” as record reporting for recent years of 2022 and 2923 may be “affected or delayed by COVID-19 related response activities.” So we will use 2020 and 2021 data for our analysis as these are up-to-date.\nDiscrepancy Between Covid 19 Deaths vs Mentions for Conditions Other Than Covid-19\nThere’s another numerical column named “Mentions”. For conditions of “Covid-19”, “number of deaths” is equal to “number of mentions”, which makes sense. Yet for almost all other conditions, their “number of mentions” is almost always larger than “number of deaths”. We suspect it’s because if a person passed away due to covid-19, but had a history of diabetes, their relatives may still put it as on his death certificate despite the hospital never diagnosed it as a contributor of death. For our research, we will use “Covid 19 Deaths” rather than mentions since if it’s produced by the hospital, it may be more authoritative and accurate."
  },
  {
    "objectID": "data.html#research-plan",
    "href": "data.html#research-plan",
    "title": "2  Data",
    "section": "2.2 Research plan",
    "text": "2.2 Research plan\n\nTrends Over Time\nAssess how the mortality rates and associated conditions have changed over time from 2020 to 2023. This can provide insights into the evolving nature of the pandemic and its impact on public health.\nMethodology: Time series analysis can be used to track the evolution of the pandemic. For example, identifying peaks in mortality rates and changes in prevalence of comorbidity over time.\nGeographical Variation\nExamine the differences in COVID-19 mortality rates and associated health conditions across different states. This could reveal how geographic factors, healthcare infrastructure, or policies might influence COVID-19 outcomes.\nMethodology: When analyzing geographical variations, we will only be using data in years 2020-2021 (estimates for this year are based on final data) as 2022 and 2023 data are provisional. We will do this by aggregating the death counts by state for the years 2020-2021 to reduce noise from short term fluctuations due to differences in reporting. Some states report deaths on a daily basis, while other states report deaths weekly or monthly. We will also normalize the death counts to account for population differences between states.\nAge-Related Vulnerability\nAnalyze how age groups differ in their vulnerability to COVID-19, considering the number of deaths and associated health conditions.\nMethodology: Conduct age-wise comparison to see how mortality rates differ across age groups. Descriptive statistics (like mean, median) and graphical representations would be useful here. We also plan to analyze the frequency and type of comorbidities in each age group.\nImpact of Specific Health Conditions on COVID-19 Mortality Rates\nInvestigate how certain pre-existing conditions (like respiratory diseases, cardiovascular diseases, diabetes, etc.) affect the mortality rates among COVID-19 patients.\nHow: Analyze ‘COVID-19 Deaths’ in relation to ‘Conditions’ and to identify which pre-existing conditions have higher mortality rates within covid-19 patients. We can use correlation analysis to understand the relationship between specific health conditions and mortality rates."
  },
  {
    "objectID": "data.html#data-preprocessing",
    "href": "data.html#data-preprocessing",
    "title": "2  Data",
    "section": "2.3 Data Preprocessing",
    "text": "2.3 Data Preprocessing\n\n\nCode\nlibrary(tidyverse)\nlibrary(ggplot2)\n\ncovid_data=read.csv(\"Conditions_Contributing_to_COVID-19_Deaths__by_State_and_Age__Provisional_2020-2023.csv\")\n\n# if group is total, fill all year and month by -1\n\n#when group = by total, replace all year and month by -1\nnew_covid=covid_data %&gt;% mutate(Year = ifelse(Group == \"By Total\", -1, Year))\nnew_covid=new_covid %&gt;% mutate(Month = ifelse(Group == \"By Total\", -1, Month))\n\n# when group = by year, replace all month by -1\nnew_covid=new_covid %&gt;% mutate(Month = ifelse(Group == \"By Year\", -1, Month))\n\n\n\n2.3.1 Missing value analysis\n\n\nCode\n# count nans\nnan_cols=colMeans(is.na(new_covid))\nnan_cols=data.frame(nan_cols)\nnan_cols &lt;- cbind(newColName = rownames(nan_cols), nan_cols)\nrownames(nan_cols) &lt;- 1:nrow(nan_cols)\n\n#plot nans\nplot &lt;- ggplot(data.frame(nan_cols),\n               aes(x=fct_reorder(newColName,-nan_cols),\n                   y=nan_cols)) +\n  geom_bar(stat=\"identity\") +\n  geom_bar(stat = \"identity\") +\n  ggtitle(\"NaN Percentage of All Columns\") +\n  theme(axis.text.x = element_text(angle = 90,\n                                   vjust = 0.5,\n                                   hjust=1)) +\n  labs(y= \"NaN percentage\",\n       x = \"columns\")\nplot\n\n\n\n\n\nUnder the column “Age Group”, there’s a value “Not stated” that covers 10% of the entire dataset, which isn’t much, and can be deleted.\nAs mentioned earlier, “COVID-19 Deaths”and “Number of Mentions”are already suppressed to NAN values if the number of deaths is &lt;10 and the “Flag” column is indicated for such entries. Such entries occupy 30% of the dataset, which is quite large. As shown in the below code for Alaska, apparently “all ages” already calculates the suppressed counts in age group, though if a state or condition has more than 1 age groups that are both suppresed, there’s no way for us to know for sure how many values are there in each of the age group. Still, we decide to impute the entries for “COVID-19 Deaths”and “Number of Mentions” as the average between 0 to 10, which is 5. The only time there’ll be large over and unestimation with imputation of death count is when we want to query by each state by each condition, and by each year, but none of our analysis includes such a precise query.In our analysis, we either query across all age groups, all covid death conditions for each state; or we query across each age group, each condition but across all of US, or across all age groups, all of US and by each condition, so the number of total deaths will be quite large for a value of hundreds to thousands. And in this case, an 5 is relatively small in comparison.\nSince we don’t use “Number of Mentions” column in our analysis, we only impute for covid death.\n\n\nCode\n# impute: when flag for an age group is not \"\", impute COVID.19.Deaths with 5\n# # sanity check: the flag should all be \"one or more...\"\n# new_covid$Flag[is.na(new_covid$COVID.19.Deaths)] |&gt; unique()\n# impute with 5\nnew_covid$COVID.19.Deaths[is.na(new_covid$COVID.19.Deaths)] &lt;- 5\n\n# # saniry check: if these are all 5\n# new_covid$COVID.19.Deaths[which(new_covid[,\"Flag\"] != '')] |&gt; unique()\n\n\nAt first glance, if an entry’s column “Group” has values “By Total”, its “Year” and “Month” are both missing, because of course that row is an aggregation of all past data. Similarly, if an entry’s column “Group” has values “By Year”, its “Month” values are missing, because that row is an aggregation of all months in that year. After replacing these implicit missing values in these rows with a dummy value “-1”, it appears that there are no actual nan values in these columns anymore. \nWe export the preprocessed dataset for covid.\n\n\nCode\nwrite.csv(new_covid, \"preproc_covid.csv\", row.names=FALSE)\n\n\n\n\n2.3.2 Preprocessing covid dataset to be joined with population dataset.\n\n\nCode\n# delete useless columns\ndf &lt;- subset(new_covid, select = -c(Data.As.Of,Start.Date,End.Date\n))\ndf = df |&gt; subset(Group==\"By Year\")\n\ndf = df |&gt; subset(Year %in% c(2020,2021))\n\nrow.names(df) &lt;- NULL\n\n# export\nwrite.csv(df, \"year_covid_20_21.csv\", row.names=FALSE)\n# # sanity check:\n# read_csv(\"year_covid_20_21.csv\")\n\n\n\n\n2.3.3 Code and Documentation for merging covid conditions dataset with population dataset\nIt’s worth noting that the annual population estimate is taken as of July each year, while we decide to use our annual COVID data as starting from January to December each year due to the limited amount of fully-updated data available. However, the discrepancy in the start and end months of these intervals won’t have much impact since the overall population of a state will not fluctuate by a really large amount across months, especially when both intervals are annual nonetheless. Thus, we believe we can simply join the population estimates with the COVID data for each state.\n\n\nCode\nlibrary(dplyr)\nlibrary(readr)\n\npopulation_data &lt;- read_csv(\"Single-Race Population Estimates 2020-2022 by State and Single-Year Age.csv\")\n\n# Modifying 'Single-Year Ages Code' column:\n# If 'Single-Year Ages Code' is \"85+\", replace it with \"85\", otherwise keep it as is.\npopulation_data &lt;- population_data %&gt;%\n  mutate(`Single-Year Ages Code` = if_else(`Single-Year Ages Code` == \"85+\", \"85\", `Single-Year Ages Code`))\n\n# Rename the 'Single-Year Ages Code' column to 'Age' for clarity\npopulation_data_formatted &lt;- population_data %&gt;%\n  rename(Age = `Single-Year Ages Code`) %&gt;%\n  mutate(\n    # Convert the Age column to integer type\n    Age = as.integer(Age),\n    # Categorize ages into groups based on age ranges\n    AgeGroup = case_when(\n      Age &lt;= 24 ~ \"0-24\",\n      between(Age, 25, 34) ~ \"25-34\",\n      between(Age, 35, 44) ~ \"35-44\",\n      between(Age, 45, 54) ~ \"45-54\",\n      between(Age, 55, 64) ~ \"55-64\",\n      between(Age, 65, 74) ~ \"65-74\",\n      between(Age, 75, 84) ~ \"75-84\",\n      Age &gt;= 85 ~ \"85+\",\n      TRUE ~ NA_character_ # Assign NA to rows not fitting any category\n    )\n  ) %&gt;%\n  # Rename 'Age' back to 'Single-Year Ages Code'\n  rename(`Single-Year Ages Code` = Age)\n\n# Aggregate data across all states for 'United States'\nus_data &lt;- population_data_formatted %&gt;%\n  filter(!is.na(`Yearly July 1st Estimates`)) %&gt;%\n  group_by(`Yearly July 1st Estimates`, AgeGroup) %&gt;%\n  summarise(TotalPopulation = sum(Population, na.rm = TRUE)) %&gt;%\n  ungroup()\n\n# Format US data and add State column\nus_data_formatted &lt;- us_data %&gt;%\n  mutate(States = \"United States\")\n\n# Group population data for each state by age group\npopulation_data_grouped &lt;- population_data_formatted %&gt;%\n  filter(!is.na(`Yearly July 1st Estimates`)) %&gt;%\n  group_by(`Yearly July 1st Estimates`, AgeGroup, States) %&gt;%\n  summarise(TotalPopulation = sum(Population, na.rm = TRUE)) %&gt;%\n  ungroup()\n\n# Combine US data with data for individual states\nall_data &lt;- rbind(us_data_formatted, population_data_grouped)\n\n# Select and rename relevant columns for the final data\nall_data_population &lt;- all_data %&gt;%\n  rename(Age.Group=AgeGroup, State=States, Year=`Yearly July 1st Estimates`)\n\ncovid_yearly_data &lt;- read_csv(\"year_covid_20_21.csv\")\n\n# Merge the population data with the COVID data\n# Using a left join to keep all rows from 'covid_yearly_data'\n# and matching rows from 'all_data_population'\ncovid_with_population &lt;- left_join(\n  covid_yearly_data,\n  all_data_population,\n  by = c(\"Age.Group\", \"State\", \"Year\"))\n\nwrite_csv(covid_with_population,\"covid_with_population.csv\")"
  },
  {
    "objectID": "results.html#covid-19-trends-over-time",
    "href": "results.html#covid-19-trends-over-time",
    "title": "3  Results",
    "section": "3.1 COVID-19 Trends Over Time",
    "text": "3.1 COVID-19 Trends Over Time\n\n\nCode\n# Filter the COVID data to include only United States data,\n# aggregated by month for all age groups, specifically for the COVID-19 condition group.\nus_data_monthly &lt;- covid_data %&gt;%\n  filter(\n    State == \"United States\",\n    Group == \"By Month\",\n    Age.Group == \"All Ages\",\n    Condition.Group == 'COVID-19'\n  )\n\ndate_breaks &lt;- seq(as.Date(\"2020-01-01\"), as.Date(\"2023-09-01\"), by = \"month\")\n\n# Creating the plot\ng &lt;- ggplot(us_data_monthly, aes(x = Start.Date, y = COVID.19.Deaths)) +\n  geom_line() +\n  geom_point() +\n  annotate(\"rect\", xmin = as.Date(\"2020-12-01\"), xmax = as.Date(\"2021-2-01\"), ymin = -Inf, ymax = Inf,   fill = \"royalblue\", alpha = 0.2) +\n  annotate(\"rect\", xmin = as.Date(\"2021-12-01\"), xmax = as.Date(\"2022-2-01\"), ymin = -Inf, ymax = Inf,   fill = \"royalblue\", alpha = 0.2) +\n  annotate(\"rect\", xmin = as.Date(\"2022-12-01\"), xmax = as.Date(\"2023-2-01\"), ymin = -Inf, ymax = Inf,   fill = \"royalblue\", alpha = 0.2) +\n  annotate(\"rect\", xmin = as.Date(\"2020-06-01\"), xmax = as.Date(\"2020-8-01\"), ymin = -Inf, ymax = Inf,   fill = \"orange1\", alpha = 0.2) +\n  annotate(\"rect\", xmin = as.Date(\"2021-06-01\"), xmax = as.Date(\"2021-8-01\"), ymin = -Inf, ymax = Inf,   fill = \"orange1\", alpha = 0.2) +\n  annotate(\"rect\", xmin = as.Date(\"2022-06-01\"), xmax = as.Date(\"2022-8-01\"), ymin = -Inf, ymax = Inf,   fill = \"orange1\", alpha = 0.2) +\n  annotate(\"rect\", xmin = as.Date(\"2023-06-01\"), xmax = as.Date(\"2023-8-01\"), ymin = -Inf, ymax = Inf,   fill = \"orange1\", alpha = 0.2) +\n  scale_x_date(breaks = date_breaks, date_labels = \"%Y-%m\") +\n  labs(\n    title = \"Monthly COVID-19 Deaths in the US\",\n    x = \"Month-Year\",\n    y = \"Total Deaths\",\n    subtitle = \"Orange = Summer Months \\nBlue = Winter Months\"\n  ) +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 90, hjust = 1))  # Rotate the x-axis labels for better readability\n\n# Print the plot\nprint(g)\n\n\n\n\n\nThe graph above is a time series line chart which illustrates the monthly death toll from the start of the pandemic in early 2020 through to the third quarter of 2023 in the United States. It is a representation of the pandemic’s progression over time, displaying large fluctuations in monthly death counts in the years 2020-2021, and stabilizing in 2022. It is apparent from the seasonal color-coding—blue for winter months and orange for summer months—that there is a recurring pattern in the data.\nWe observe an increase in COVID-19 deaths during both summer and winter months, with a more pronounced increase in the winter. The increase during the winter months, may be influenced by several factors:\n\nIndoor Gathering: The colder weather drives people indoors, where the virus can spread more easily due to close contact and poor ventilation.\nSeasonal Viruses: The winter months coincide with the flu season, where other respiratory viruses are also prevalent, potentially worsening COVID-19 cases.\nHoliday Seasons: Winter months include holidays (Christmas, New Years, etc) that typically involve family gatherings and increased social interaction, making it more likely for the virus to spread.\n\nConversely, during summer, while outdoor activities may generally reduce the transmission rate compared to winter, we still observe increases in deaths. This could be due to:\n\nSocial Activities: Summer holidays and events can result in gatherings and increased contact among individuals, leading to spikes.\nAir Conditioning: Increased use of air conditioning during hot months can lead to similar indoor circulation patterns as in winter, facilitating the spread of the virus."
  },
  {
    "objectID": "results.html#geographical-variations",
    "href": "results.html#geographical-variations",
    "title": "3  Results",
    "section": "3.2 Geographical Variations",
    "text": "3.2 Geographical Variations\nWe have observed a recurring pattern in COVID-19 deaths over time, with seasonal factors playing a notable role in the fluctuation of death rates. While time allows us to track flow of the pandemic’s impact, geography provides another critical aspect for understanding the spread and toll of the virus.\nTo do an interactive Choropleth of COVID-19 deaths across US states in Plotly, we need to obtain the 2-letter abbreviations, which can be downloaded here: https://github.com/jasonong/List-of-US-States/blob/master/states.csv\nFor death rate, we used the standard way of calculating “The number of deaths per 100,000 total population” as noted from https://www.cdc.gov/nchs/pressroom/sosmap/covid19_mortality_final/COVID19.htm. We’ll also compare our death rate choropleth maps to the ones from this official source.\n\n\nCode\n# 2020\ndata=read.csv(\"covid_with_population.csv\")\n\ngeo_df20 = data |&gt; filter(Year==2020)\n# # sanity check: year should all be 2020\n# geo_df20$Year |&gt; unique()\n# # sanity check: for Alabama, all conditions' population should be the same\n# geo_df20 |&gt; subset(State==\"Alabama\")\n# # check Alabama for covid\n# geo_df20 |&gt; subset(State==\"Alabama\" & Condition.Group==\"COVID-19\"  )\n\n# filter data: only select covid19, ages except all ages, states != US\ngeo_df20 = geo_df20 |&gt; subset(Age.Group!=\"All Ages\" & Condition.Group==\"COVID-19\" & State!=\"United States\")\n# geo_df20$State |&gt; unique() |&gt; length()\n\n# for each state, calculate total population & all covid deaths\naggr_20=geo_df20 |&gt; aggregate(cbind(COVID.19.Deaths,TotalPopulation) ~ State, FUN = sum,na.action = na.pass)\n# aggr_20$State |&gt; unique() |&gt; length()\n# aggr_20 |&gt; filter(State==\"New York City\" | State==\"New York\")\n\n# add NYC to NY\naggr_20$COVID.19.Deaths[aggr_20$State == \"New York\"] &lt;- aggr_20$COVID.19.Deaths[aggr_20$State == \"New York\"]+aggr_20$COVID.19.Deaths[aggr_20$State == \"New York City\"]\n\n## sanity check\n# aggr_20 |&gt; filter(State==\"New York City\" | State==\"New York\")\n\n# calculate rate\naggr_20$death_rate=round(aggr_20$COVID.19.Deaths/(aggr_20$TotalPopulation/100000), digits = 1)\n# aggr_20\n\n#import state abbrev\ndf_states=read_csv(\"states.csv\")\n\n# aggr_20$State |&gt; unique() |&gt; length()\n# df_states$State |&gt; unique() |&gt; length()\n# join state codes\nplot_df_20 &lt;- aggr_20 %&gt;% left_join(df_states,by=\"State\")\n\n# # check is there's nan\n# subset(plot_df_20,is.na(Abbreviation))\n\n# drop nan\nplot_df_20=plot_df_20 |&gt; drop_na(Abbreviation)\n#plot_df_20\n\n# Year 2021\ngeo_df21=data |&gt; filter(Year==2021)\n# # sanity check: year should all be 2021\n# geo_df21$Year |&gt; unique()\n# # sanity check: for Alabama, all conditions' population should be the same\n# geo_df21 |&gt; subset(State==\"Alabama\")\n# # check Alabama for covid\n# geo_df21 |&gt; subset(State==\"Alabama\" & Condition.Group==\"COVID-19\"  )\n\n# filter data: only select covid19, ages except all ages, states != US\ngeo_df21 = geo_df21 |&gt; subset(Age.Group!=\"All Ages\" & Condition.Group==\"COVID-19\" & State!=\"United States\")\n# geo_df21$State |&gt; unique() |&gt; length()\n\n# for each state, calculate total population & all covid deaths\naggr_21=geo_df21 |&gt; aggregate(cbind(COVID.19.Deaths,TotalPopulation) ~ State, FUN = sum,na.action = na.pass)\n# aggr_21$State |&gt; unique() |&gt; length()\n# aggr_21 |&gt; filter(State==\"New York City\" | State==\"New York\")\n\n# add NYC to NY\naggr_21$COVID.19.Deaths[aggr_21$State == \"New York\"] &lt;- aggr_21$COVID.19.Deaths[aggr_21$State == \"New York\"]+aggr_21$COVID.19.Deaths[aggr_21$State == \"New York City\"]\n\n# # sanity check\n# aggr_21 |&gt; filter(State==\"New York City\" | State==\"New York\")\n\n# calculate rate\naggr_21$death_rate=round(aggr_21$COVID.19.Deaths/(aggr_21$TotalPopulation/100000), digits = 1)\n# aggr_21\n\n#import state abbrev\ndf_states=read_csv(\"states.csv\")\n\n# aggr_21$State |&gt; unique() |&gt; length()\n# df_states$State |&gt; unique() |&gt; length()\n# join state codes\nplot_df_21 &lt;- aggr_21 %&gt;% left_join(df_states,by=\"State\")\n\n# # check is there's nan\n# subset(plot_df_21,is.na(Abbreviation)) \n\n# drop nan\nplot_df_21=plot_df_21 |&gt; drop_na(Abbreviation)\n#plot_df_21\n\n# create plots\n#common\n# give state boundaries a white border\nl &lt;- list(color = toRGB(\"white\"), width = 2)\n# specify some map projection/options\ng &lt;- list(\n  scope = 'usa',\n  projection = list(type = 'albers usa'),\n  showlakes = TRUE,\n  lakecolor = toRGB('white')\n)\n\n# find min and max values for plot scale\n#c(plot_df_20$death_rate,plot_df_21$death_rate) |&gt; min() \n#c(plot_df_20$death_rate,plot_df_21$death_rate) |&gt; max()\n\n\n\n\nCode\n# plot\nm &lt;- list(\n  l = 5,\n  r = 5,\n  b = 5,\n  t = 40,\n  pad = 4\n)\n\n# 2020 plot\nplot_df_20$hover &lt;- with(plot_df_20, paste(State, '&lt;br&gt;', \"Death Rate:\", death_rate, '&lt;br&gt;', \"Death Count:\",COVID.19.Deaths))\n\nfig_20 &lt;- plot_geo(plot_df_20, locationmode = 'USA-states')\nfig_20 &lt;- fig_20 %&gt;% add_trace(\n    z = ~death_rate, locations = ~Abbreviation, text = ~hover,\n    color = ~death_rate, colors = 'Purples',\n    zmin=20, zmax=230\n  )\nfig_20 &lt;- fig_20 %&gt;% colorbar(title = \"death rate &lt;br&gt; (per 100,000 population)\")\n\nfig_20 &lt;- fig_20 %&gt;% layout(\n    title = '2020 US COVID-19 Death Rate',\n    geo = g,\n    autosize = T, margin = m\n  )\n\n# 2021 plot\nplot_df_21$hover &lt;- with(plot_df_21, paste(State, '&lt;br&gt;', \"Death Rate:\", death_rate, '&lt;br&gt;', \"Death Count:\",COVID.19.Deaths))\n\nfig_21 &lt;- plot_geo(plot_df_21, locationmode = 'USA-states')\nfig_21 &lt;- fig_21 %&gt;% add_trace(\n    z = ~death_rate, locations = ~Abbreviation, text = ~hover,\n    color = ~death_rate, colors = 'Purples',\n    zmin=20, zmax=230\n  )\nfig_21 &lt;- fig_21 %&gt;% colorbar(title = \"death rate  &lt;br&gt; (per 100,000 population)\")\n\nfig_21 &lt;- fig_21 %&gt;% layout(\n    title = '2021 US COVID-19 Death Rate',\n    geo = g,\n    autosize = T, margin = m\n  )\n\nfig_20\n\n\n\n\n\n\nCode\nfig_21\n\n\n\n\n\n\nIn examining the geographical distribution of COVID-19 death rates across the United States in 2020 and 2021, we observe regional variations. During 2020, higher death rates were observed in the Northeastern and Midwestern states, with New Jersey, New York, North Dakota, and South Dakota exhibiting higher figures. This could potentially reflect the initial outbreak hotspots. The Southern states presented varied death rates, generally hovering around an average of 120, while the Western states showed lower death rates.\nIn 2021, a shift is evident. The Southern states, previously having moderate rates, show a significant increase in death rates. This illustrates the dynamic nature of COVID-19, potentially influenced by varying public health policies, vaccine rollouts, and virus variants. Meanwhile, the Northeastern and Midwestern states, which initially had the highest death rates in 2020, showed a decrease in death rates. This decrease could indicate the effectiveness of public health measures and heightened community awareness. Moreover, it’s noteworthy to highlight the case of Vermont, which stands out for its consistently low death rates in both 2020 and 2021.\nIt is also worth noting that the state-wise patterns in our maps are quite similar to the ones from the official source: https://www.cdc.gov/nchs/pressroom/sosmap/covid19_mortality_final/COVID19.htm. There may be numerical discrepancies in both death rate and death count: as mentioned earlier, our annual population estimates and annual COVID death have different start and end months which may contribute to some deviations, the official source notes that its calculation of death rate is “adjusted for differences in age-distribution and population size”."
  },
  {
    "objectID": "results.html#age-related-vulnerability",
    "href": "results.html#age-related-vulnerability",
    "title": "3  Results",
    "section": "3.3 Age-Related Vulnerability",
    "text": "3.3 Age-Related Vulnerability\nHaving examined the geographical distribution of COVID-19 death rates across various regions, we will now extend our analysis to understand how the pandemic has impacted different age groups.\n\n\nCode\nage_group_over_time &lt;- covid_data %&gt;%\n  filter(State == \"United States\",\n         Group == \"By Month\",\n         Condition.Group == 'COVID-19') %&gt;% \n  filter(!Age.Group %in% c(\"Not stated\", \"All Ages\"))\n\np &lt;- ggplot(\n  age_group_over_time,\n  aes(Start.Date, COVID.19.Deaths, group = Age.Group, color = factor(Age.Group))\n  ) +\n  geom_line() +\n  scale_color_viridis_d() +\n  labs(x = \"Time Period\", y = \"COVID-19 Deaths\", title='Monthly COVID-19 Deaths Across Age Groups') +\n  theme(legend.position = \"right\")\n\np + \n  geom_point() +\n  transition_reveal(Start.Date)\n\n\n\n\n\nThe graph above shows the monthly death toll within specific age cohorts. It is evident from the visualization that the virus has not affected age groups uniformly. Each age group exhibits distinct peaks and valleys, indicative of the waves of the pandemic. The highest peaks correspond to the older age groups, particularly those aged 65 and above, while the lowest peaks correspond to youngest age group, 0-24.\n\n\nCode\n# Filter the COVID data to include only US data for the 'COVID-19' condition group, \n# and exclude unspecified or 'All Ages' age groups. Then, create a new categorical variable \n# based on age to separate data into '65 and Older' and 'Under 65'.\nage_group_data &lt;- covid_data %&gt;%\n  filter(State == \"United States\",\n         Group == \"By Month\",\n         Condition.Group == 'COVID-19') %&gt;% \n  filter(!Age.Group %in% c(\"Not stated\", \"All Ages\")) %&gt;% \n  mutate(Over_Under_65 = ifelse(Age.Group %in% c(\"65-74\", \"75-84\", \"85+\"),\n                                \"65 and Older\",\n                                \"Under 65\"))\n\n# Define the start and end dates for the period of interest.\nstart_date &lt;- as.Date(\"2020-04-01\")\nend_date &lt;- as.Date(\"2022-09-01\")\n  \n# Group data by month and age category, and summarize total deaths. \n# Then filter the data to include only the dates within the defined period.\nmonthly_deaths_age_group &lt;- age_group_data %&gt;%\n                            group_by(Start.Date, Over_Under_65) %&gt;%\n                            summarize(TotalDeaths = sum(COVID.19.Deaths, na.rm = TRUE)) %&gt;%\n                            ungroup() %&gt;% \n                            filter(between(Start.Date, start_date, end_date))\n\n# Convert the 'Over_Under_65' column to a factor with specified levels for proper ordering in the plot.\nmonthly_deaths_age_group$Over_Under_65 &lt;- factor(monthly_deaths_age_group$Over_Under_65, \n                                                 levels = c(\"Under 65\", \"65 and Older\"))\n\n# Create a sequence of breaks for the x-axis (dates).\ndate_breaks &lt;- seq(start_date, end_date, by = \"month\")\n\n# Create the bar chart\nage_bar_chart &lt;- ggplot(monthly_deaths_age_group, aes(x = Start.Date, y = TotalDeaths, fill = Over_Under_65)) +\n     geom_bar(stat = \"identity\", position = position_dodge()) + \n  # Annotate periods of interest with colored rectangles\n  annotate(\"rect\", xmin = as.Date(\"2021-06-01\"), xmax = as.Date(\"2021-12-01\"), ymin = -Inf, ymax = Inf, fill = \"yellow\", alpha = 0.2) +\n  annotate(\"rect\", xmin = as.Date(\"2021-12-01\"), xmax = as.Date(\"2022-10-01\"), ymin = -Inf, ymax = Inf, fill = \"orange\", alpha = 0.2) +\n  # Add vertical lines to mark specific events\n  geom_vline(xintercept = as.Date(\"2020-12-15\"), linetype = \"dotted\", color = \"blue\", size = 1) +\n  geom_vline(xintercept = as.Date(\"2021-09-22\"), linetype = \"dotted\", color = \"blue\", size = 1) +\n  # Add text annotations for vaccine approvals and variant emergence\n  annotate(\"text\", x = as.Date(\"2020-10-15\"), y = 50000, label = \"First vaccine approved\", color = \"black\", size = 4, vjust = -1) +\n  annotate(\"text\", x = as.Date(\"2021-7-22\"), y = 50000, label = \"First booster approved\", color = \"black\", size = 4, vjust = -1) +\n  annotate(\"text\", x = as.Date(\"2021-8-01\"), y = 80000, label = \"Delta variant\", color = \"red\", size = 4, vjust = -1) +\n  annotate(\"text\", x = as.Date(\"2022-4-15\"), y = 80000, label = \"Omicron variants\", color = \"red\", size = 4, vjust = -1) +\n     labs(title = \"Monthly COVID-19 Deaths in the US (Over and Under 65)\",\n          x = \"Time\",\n          y = \"Total Deaths\",\n          fill = \"Age Group\") +\n  # Format the x-axis with the predefined date breaks\n  scale_x_date(breaks = date_breaks, date_labels = \"%Y-%m\") +\n     theme_minimal() +\n  theme(axis.text.x = element_text(angle = 90, hjust = 1))\n\n# Print the plot\nage_bar_chart\n\n\n\n\n\nAs seen previously, age has been a determinant factor in COVID-19 mortality, especially when comparing the death counts in age groups above and below 65. The above is a stacked bar chart displaying monthly COVID-19 deaths in the United States, categorized by age groups: under 65 and 65 and older. Key milestones such as the approval of the first COVID-19 vaccine, the emergence of the Delta variant, the approval of the first booster, and the arrival of Omicron variants are marked on the timeline.\n\nImpact of Vaccinations and Booster: There is a noticeable decrease in deaths following the approval of the first vaccine, especially in the 65 and older age group, which likely received priority for vaccinations. We can see similar patterns after the approval and subsequent administration of booster shots. This suggests that vaccines and booster have had a positive impact in reducing COVID-19 mortality.\nVariant-Related Surges: Although vaccinations have helped in reducing COVID-19 mortality, we see noticable surges in deaths after emergence of the Delta and Omicron variants. This indicates the significant challenges posed by new variants, which can be more transmissible or potentially more fatal. The spikes in deaths corresponding to these variants underscore the ongoing need for adaptation in public health responses.\nVulnerability of Older Adults: The data consistently shows that older age groups are more impacted by COVID-19.\n\n\n\nCode\n# Load COVID-19 data with population and filter it for the United States, \n# excluding 'All Ages' category, and then group by 'Age.Group'.\nage_group_death_and_pop &lt;- read_csv(\"covid_with_population.csv\") %&gt;% \n  filter(State == \"United States\",\n         Condition.Group == 'COVID-19',\n         Age.Group != 'All Ages') %&gt;% \n  group_by(Age.Group) %&gt;%\n  summarize(COVID.19.Deaths = sum(COVID.19.Deaths, na.rm = TRUE), \n            TotalPopulation = sum(TotalPopulation, na.rm = TRUE))\n\n# Calculate the proportion of COVID-19 deaths and the proportion of the total population \n# for each age group.\nage_group_death_and_pop &lt;- age_group_death_and_pop %&gt;%\n  mutate(\n    ProportionDeaths = COVID.19.Deaths / sum(COVID.19.Deaths),\n    ProportionPopulation = TotalPopulation / sum(TotalPopulation)\n  )\n\n# Reshape the data to long format for plotting. \n# This creates a new column 'Category' for plotting purposes.\nlong_data &lt;- age_group_death_and_pop %&gt;%\n  pivot_longer(\n    cols = c(\"ProportionDeaths\", \"ProportionPopulation\"),\n    names_to = \"Category\",\n    values_to = \"Proportion\"\n  ) %&gt;%\n  mutate(Category = factor(Category, levels = c(\"ProportionPopulation\", \"ProportionDeaths\")))\n\n# Create a stacked bar chart to visualize the proportions.\n# The chart will have two panels (facets) side by side for each category \n# (ProportionPopulation and ProportionDeaths).\nggplot(long_data, aes(x = Category, y = Proportion, fill = Age.Group)) +\n  geom_bar(stat = \"identity\", position = \"fill\") +\n  facet_wrap(~Category, ncol = 2, scales = \"free_x\") +\n  theme_minimal() +\n  labs(\n    title = \"Population and Death Proportions Across Age Groups (2020-2021)\",\n    fill = \"Age Group\"\n  ) +\n  scale_y_continuous(labels = scales::percent_format(accuracy = 1)) +\n  theme(\n    panel.spacing.x = unit(0, \"lines\"), # Remove space between facets\n    strip.text = element_blank()       # Remove facet labels for a cleaner look\n  )\n\n\n\n\n\nThe above is a bar chart comparing the proportion of the population to the proportion of COVID-19 deaths across various age groups for the years 2020-2021. The left side of the chart displays the composition of the general population across age cohorts, while the right side shows the corresponding proportions of COVID-19 related deaths. The bar charts highlight the disproportionate impact of COVID-19 on different age groups. As we move to older age groups, the disparity becomes apparent: the proportion of deaths attributed to these groups exceeds their representation in the overall population. This disparity grows more pronounced with older age, illustrating the increased risk of older individuals to COVID-19."
  },
  {
    "objectID": "results.html#underlying-medical-conditions-associated-with-covid-19-deaths",
    "href": "results.html#underlying-medical-conditions-associated-with-covid-19-deaths",
    "title": "3  Results",
    "section": "3.4 Underlying Medical Conditions Associated with COVID-19 Deaths",
    "text": "3.4 Underlying Medical Conditions Associated with COVID-19 Deaths\nSo far, the graphs we’ve examined illustrates how COVID-19 mortality rates rise with age, revealing that the older population are most impacted. The disproportionality of these figures compel us to look beyond age and delve into the underlying medical conditions that may have played a role in contributing these moralities.\n\n\nCode\n# Filter the data to include only the total number of cases for all ages in the United States for the years 2020 and 2021\nhealth_data_all_ages &lt;- covid_data %&gt;%\n  filter(\n    State == \"United States\", # Filter for the United States\n    Group == \"By Year\",       # Data aggregated by year\n    Year %in% c(\"2020\", \"2021\"), # Only for the years 2020 and 2021\n    Age.Group == \"All Ages\"   # Include all age groups\n  ) %&gt;%\n  mutate(Condition = case_when(\n    Condition == \"Intentional and unintentional injury, poisoning, and other adverse events\" ~ \"Injury and poisoning\",\n    TRUE ~ Condition\n  ))\n\n# Extract the total number of COVID-19 deaths for the year 2020\ndeaths_2020 &lt;- health_data_all_ages$COVID.19.Deaths[health_data_all_ages$Condition == \"COVID-19\" & health_data_all_ages$Year == 2020]\n\n# Extract the total number of COVID-19 deaths for the year 2021\ndeaths_2021 &lt;- health_data_all_ages$COVID.19.Deaths[health_data_all_ages$Condition == \"COVID-19\" & health_data_all_ages$Year == 2021]\n\n# Calculate the percentage of deaths for each condition as a proportion of the total COVID-19 deaths for that year\nhealth_data_all_ages &lt;- health_data_all_ages %&gt;% \n  mutate(\n    percentage_death = case_when(\n      Year == 2020 ~ (COVID.19.Deaths / deaths_2020)*100, # Calculate percentage for 2020\n      Year == 2021 ~ (COVID.19.Deaths / deaths_2021)*100, # Calculate percentage for 2021\n      TRUE ~ NA                                           # If not 2020 or 2021, percentage is NA\n    )\n  ) %&gt;%\n  filter(Condition != 'COVID-19') %&gt;% # Exclude the COVID-19 condition itself as this gives the total death\n  mutate(Year = as.factor(Year))      # Convert 'Year' to a factor for plotting purposes\n\n\n\n\nCode\n# Prepare labels for the highest percentage death value for each condition\nright_label &lt;- health_data_all_ages %&gt;%\n  group_by(Condition) %&gt;%\n  slice_max(order_by = percentage_death, n = 1)\n\n# Prepare labels for the second highest percentage death value for each condition\nleft_label &lt;- health_data_all_ages %&gt;%\n  group_by(Condition) %&gt;%\n  slice_max(order_by = percentage_death, n = 2) %&gt;%\n  filter(!row_number() == 1) # To exclude the top value which is already included in right_label\n\n# Create the plot\nggplot(health_data_all_ages, aes(x = reorder(Condition, percentage_death), y = percentage_death)) +\n  geom_line(aes(group = Condition, color = as.factor(Year))) + # Connect points with lines for each condition and color by year\n  coord_flip() + # Flip the coordinates to make the conditions appear on the y-axis\n  geom_point(aes(color = as.factor(Year))) + # Plot points for each year with different colors\n  geom_text(data = right_label, \n            aes(label = round(percentage_death, 0), color = as.factor(Year)),\n            size = 3, hjust = -0.5) + # Add labels for the highest value to the right of the points\n  geom_text(data = left_label, \n            aes(label = round(percentage_death, 0), color = as.factor(Year)),\n            size = 3, hjust = 1.5) + # Add labels for the second highest value to the left of the points\n  labs(title = \"Prevalence of Different Health Conditions in COVID-19 Deaths (2020 vs 2021)\", # Title of the plot\n       x = \"Condition\", \n       y = \"Percentage Death\", \n       color = \"Year\") \n\n\n\n\n\nIn 2020, the CDC released a detailed account of health complications accompanying COVID-19 deaths in the United States. The figures reveal a significant insight: only about 6% of the reported fatalities were solely due to COVID-19, suggesting that nearly all patients who died had pre-existing conditions. The most prevalent conditions include respiratory diseases like influenza and pneumonia, respiratory failure, diabetes, various types of dementia, and heart-related ailments - which is consistent with what we are seeing in the graph above.\nThe year-over-year percentage comparison between 2020 and 2021 highlighted in the graph indicates the following:\n\nIncrease in proportion involving influenza and pneumonia, respiratory failure: The increase in proportions of people with deaths related to respiratory conditions may reflect the emergence of new, more virulent virus strains, which are more contagious and fatal.\nDecline in proportion of hypertensive diseases: On the flip side, the observed decline in proportion of deaths associated with conditions like hypertensive diseases could be linked to the increased protective measures and medical interventions that became available over time, including the administration of vaccines.\nDecline in proportion of vascular and unspecified dementia: Similar to the point above, administration of COVID-19 vaccines in 2021 may have reduced the severity of the disease, particularly among the elderly and those with underlying health conditions like dementia, which could explain the decrease in associated deaths.\n\n\n\nCode\n# Filter the COVID data for the United States, by month, for all ages, \n# and for the top 5 conditions only.\ntop5_condition_data &lt;- covid_data %&gt;%\n  filter(State == \"United States\",\n         Group == \"By Month\",\n         Condition %in% c(\"Influenza and pneumonia\", \"Respiratory failure\",\n                          \"Hypertensive diseases\", \"Diabetes\", \"Cardiac arrest\"),\n         Age.Group == \"All Ages\")\n\n# Group the data by quarter and year, and summarize the total COVID-19 deaths\n# for each condition within each quarter-year.\ntop5_condition_quarter &lt;- top5_condition_data %&gt;% \n  mutate(Quarter = ceiling(Month/3),  # Calculate the quarter number from the month\n         Quarter_Year = paste0(Year, \"_Q\", Quarter)) %&gt;%  # Create a new column combining year and quarter\n  group_by(Quarter_Year, Condition) %&gt;% \n  summarize(COVID.19.Deaths = sum(COVID.19.Deaths))  # Sum the deaths for each quarter and condition\n\n# Create the line chart\n# Each condition will have its own line and points, colored uniquely.\nggplot(top5_condition_quarter, aes(x = Quarter_Year, y = COVID.19.Deaths, group = Condition, color = Condition)) +\n  geom_line() +  \n  geom_point() + \n  theme_minimal() +\n  labs(x = \"Quarter\", y = \"Number of COVID-19 Deaths\", \n       title = \"COVID-19 Deaths by Condition Over Quarters\", color = \"Condition\") +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))  # Rotate x-axis labels for better readability\n\n\n\n\n\nThe graph above takes a closer look at the 5 most prevelant conditions in COVID-19 deaths and their prevelance has changed over time, from 2020 to 2023. All five conditions plotted in the graph follow a similar trend over time, particularly with respect to the peaks and troughs that coincide with the quarters. This could imply that individuals who died from COVID-19 often had multiple underlying health issues, which is consistent with the understanding that comorbidities can increase the risk of death from COVID-19.\nInfluenza and pneumonia, as well as respiratory failure, show significant spikes at certain points, which could correlate with the direct impact of COVID-19 on respiratory health. By 2022 and into 2023, the lines representing each condition level off, indicating a stabilization in the number of deaths, which might suggest that the public health measures and medical interventions are having a positive effect, or that the most vulnerable populations had already been significantly impacted in the earlier phases of the pandemic.\nThese trends will be further explored in the ‘Interactive Graph’ section of our report.\n\n\nCode\nlibrary(reshape2)\n# Filter the COVID data for the United States by year for 2020 and 2021, excluding the 'COVID-19' condition\n# and removing unspecified or 'All Ages' age groups.\nhealth_data_age_group &lt;- covid_data %&gt;%\n  filter(\n    State == \"United States\",\n    Group == \"By Year\",\n    Year %in% c(\"2020\", \"2021\"),\n    Condition != 'COVID-19'\n  ) %&gt;% \n  filter(!Age.Group %in% c(\"Not stated\", \"All Ages\")) %&gt;% \n    mutate(Condition = case_when(\n    Condition == \"Intentional and unintentional injury, poisoning, and other adverse events\" ~ \"Injury and poisoning\",\n    TRUE ~ Condition\n  ))\n\naggregated_data &lt;- aggregate(COVID.19.Deaths ~ Condition + Age.Group, data = health_data_age_group, sum)\n\n# Reshape the aggregated data into a wide format suitable for a heatmap\nwide_data &lt;- dcast(aggregated_data, Condition ~ Age.Group, value.var = \"COVID.19.Deaths\")\n\n# Replace NA with 0 for the heatmap (if needed)\nwide_data[is.na(wide_data)] &lt;- 0\n\n# Create the heatmap\nggplot(melt(wide_data), aes(x = variable, y = Condition, fill = value)) +\n  geom_tile() +\n  scale_fill_viridis_c(option = \"D\") +\n  labs(title = \"COVID-19 Deaths by Age Group and Underlying Health Conditions\", x = \"Age Group\", y = \"Condition\", fill = \"COVID-19 Deaths\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(hjust = 1))\n\n\n\n\n\nNext, we will delve deeper into the nuances of COVID-19 mortality across age groups by examining the specific underlying health conditions associated with the deaths. The heat map above visualizes the distribution of COVID-19 deaths across different age groups, against a variety of present health conditions. It offers a granular perspective, illustrating not just the age-related vulnerability to COVID-19, but also how various pre-existing medical conditions have influenced the mortality rates within each age bracket. For example, while the bar charts we’ve seen in the previous sections indicated a general increase in mortality with age, the heat map allows us to see precisely which conditions most frequently accompany these deaths.\nNotably, the lighter colors—which indicate the highest number of deaths—are predominantly seen in the older age groups, particularly those aged 55+. This is consistent with data suggesting that older individuals are at a greater risk of severe outcomes when contracting COVID-19, often worsened by pre-existing health issues. In the older age groups, the heat map shows that conditions such as respiratory failure and influenza and pneumonia are the most prevalent ones, which is expected as these complications often come with COVID-19.\n\n\nCode\n# Recategorize the age groups into broader categories and convert to a factor with specified levels.\nhealth_data_age_groups &lt;- health_data_age_group %&gt;% \n  mutate(\n    Age_Group = case_when(\n      Age.Group == \"0-24\" ~ \"Young (0-24)\",\n      Age.Group %in% c(\"25-34\", \"35-44\", \"45-54\") ~ \"Middle-Aged (25-54)\",\n      TRUE ~ \"Old (55+)\"\n    )\n  ) %&gt;% \n  mutate(Age_Group = factor(Age_Group, levels = c(\"Young (0-24)\", \"Middle-Aged (25-54)\", \"Old (55+)\"))) %&gt;% \n  group_by(Condition, Age_Group) %&gt;% \n  summarise(COVID.19.Deaths = sum(COVID.19.Deaths)) %&gt;% \n  ungroup()\n\n# Calculate the top conditions within each age group and sort them.\ntop_conditions_by_age_group &lt;- health_data_age_groups %&gt;%\n  group_by(Age_Group, Condition) %&gt;%\n  summarize(COVID.19.Deaths = sum(COVID.19.Deaths, na.rm = TRUE)) %&gt;%\n  arrange(Age_Group, desc(COVID.19.Deaths)) %&gt;%\n  group_by(Age_Group) %&gt;%\n  slice_max(COVID.19.Deaths, n = 5) %&gt;%\n  ungroup()\n\n# Join with the original data to create a flag for the top conditions for use in coloring the plot.\nhealth_data_age_groups &lt;- health_data_age_groups %&gt;%\n  left_join(top_conditions_by_age_group, by = c(\"Age_Group\", \"Condition\"), suffix = c(\"\", \".top\")) %&gt;%\n  mutate(Is_Top_Condition = ifelse(!is.na(COVID.19.Deaths.top), \"Top 5\", \"Other\")) %&gt;%\n  select(-COVID.19.Deaths.top) # Remove the auxiliary column after creating the flag.\n\n\n\n\nCode\n# Create a bar chart, flipping the coordinates for a horizontal chart,\n# and using facets to create separate plots for each age group.\nggplot(health_data_age_groups, aes(x = reorder(Condition, COVID.19.Deaths), y = COVID.19.Deaths / 1000, fill = Is_Top_Condition)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  coord_flip() +\n  facet_wrap(~Age_Group, scales = \"free_x\") +\n  scale_fill_manual(values = c(\"Top 5\" = \"red3\", \"Other\" = \"darkgrey\")) +\n  scale_y_continuous(labels = scales::comma, name = \"Number of Deaths (in Thousands)\") +  # Adjust y-axis labels\n  labs(title = 'Top Comorbidities Associated with COVID-19 Deaths Across Age Groups',\n       x = \"Health Conditions\", \n       y = \"Number of Deaths (in Thousands)\"\n  ) +\n  theme_minimal()\n\n\n\n\n\nBuilding on the insights from the heat map, we now focus on the comparative impact of specific health conditions across different age cohorts. The chart above categorizes the frequency of conditions accompanying COVID-19 deaths, highlighting the top five deadliest comorbidities within distinct age groups: young (0-24), middle-aged (25-54), and older (55+). Several key observations emerge from this analysis:\n\nPrevalence of Obesity in Younger Age Groups: Interestingly, obesity appears as a significant comorbidity in the younger demographic. This contrasts with older age groups, where conditions like hypertensive disease, respiratory diseases, and diabetes predominate and pose greater mortality risks. The absence of obesity as a top comorbidity in older age groups might reflect a survivorship bias: individuals with severe obesity may face higher mortality at younger ages, thus reducing their representation among older COVID-19 fatalities.\nComorbidity Trends in Middle to Older Age Group: As we examine the middle-aged group, the visualization shifts to reveal a broader range of health issues leading to death, with top conditions like diabetes and hypertensive diseases becoming more prominent. These findings underscore the relationship between chronic conditions and COVID-19, which may not be as common in younger populations but pose a risk in the older age brackets.\nMultiplicity of Co-existing Conditions: Particularly in the older age group, the presence of multiple comorbidities among the top causes of death highlights that COVID-19-related fatalities often involve an interplay of health conditions."
  },
  {
    "objectID": "d3graph.html",
    "href": "d3graph.html",
    "title": "4  Interactive graph",
    "section": "",
    "text": "2020 Q1\n\n\n2020 Q2\n\n\n2020 Q3\n\n\n2020 Q4\n\n\n2021 Q1\n\n\n2021 Q2\n\n\n2021 Q3\n\n\n2021 Q4\n\n\n\n\n\n\nCOVID-19 death counts of top 5 conditions by quarter in 2020-2021\n\n\nThe percentage shows the change of the current value you’re currently on compared to the previous value you’ve previously clicked. Note: percentage only shows up once you’ve clicked on a button, red indicates percentage increase or no change, and green indicates decrease.\nThe blue number shows the total number of death of the quarter you’re currently on.\nOur previous exploration utilized line charts to trace the death counts of the top 5 health conditions over different quarters. While line charts are adept at showcasing overall trends and correlations among variables, they sometimes fall short in accurately representing the finer details, particularly when it comes to small variations in data slopes between consecutive quarters. Moreover, line charts tend to overload viewers with information, where viewers tend to focus more on the macroscopic trends across all time periods, instead of focusing on the microscopic comparisons between 2 consecutive periods.\nTo address these limitations, we believe the usage of D3 interactive graphs will provide better visualizations on how variables increase and decrease throughout 2 quarters with respect to one another. In our D3 visualization, each quarter plots the top 5 conditions, with the conditions ordered on the x-axis in descending order of death counts.\nThe D3 animation reveals some insights:\n\nIn 2020 Q2, the period of the initial surge of COVID-19, there is a dramatic spike in death counts for all conditions, soaring by almost 1500% from the previous quarter.\n2021 Q1 is an interesting quarter. The top 2 conditions of Influenza and Respiratory Failure reach their highest death account in the 2 years. Usually, all 5 variables are positively correlated with one another, yet in 2021 Q1, Hypertensive Disease and Diabetes decrease while Influenza and Respiratory failure increase.\nFrom 2021 Q3 and 2021 Q4, death counts for all conditions become relatively stable.\nFrom 2020 Q1 to 2021 Q4, we can see the massive death counts responsible by each condition at the end of 2 years."
  },
  {
    "objectID": "conclusion.html",
    "href": "conclusion.html",
    "title": "5  Conclusion",
    "section": "",
    "text": "As we conclude our exploration, we reflect on the insights gained and their broader implications. This report, utilizing the data from the National Center for Health Statistics and CDC Wonder, broke down the impact of the COVID-19 pandemic through various angles: trends over time, geographical variations, age-related vulnerabilities, and the impact of specific health conditions.\nKey Takeaways\n\nTrend Analysis: Our time series analysis revealed fluctuations in COVID-19 mortality rates, with noticeable seasonal patterns. Specifically, we saw that deaths tend to rise in winter and summer months.\nGeographical Insights: The geographical analysis highlighted regional disparities in COVID-19 impact, indicating the influence of healthcare infrastructure and public health policies. An interesting observation was the consistent low death rates in Vermont, suggesting effective local health measures.\nAge-Related Findings: The data illustrated the varying impacts of COVID-19 across different age brackets, with older populations being more vulnerable. This highlights the necessity for age-tailored health strategies and protective measures.\nHealth Conditions and Mortality: Analyzing health conditions, we found that conditions like respiratory diseases, hypertensive diseases and diabetes were closely linked with higher COVID-19 mortality rates. This highlights the need for targeted medical interventions for high-risk groups.\n\nLimitations\n\nData Completeness: Our analysis may not fully capture unreported or misclassified COVID-19 deaths, especially in the case of provisional data for 2022 and 2023.\nComorbidity Reporting: The data on comorbidities is dependent on the accuracy of medical reporting. Inconsistent documentation across jurisdictions may have led to under or overestimation of certain health conditions' impact.\nTemporal Delays: The lag in data reporting, particularly for recent years, may have affected the timeliness and relevance of our findings.\nPopulation Data Constraints: Our analysis utilized yearly population data that was recorded as of July 1st each year. However, our mortality analysis spanned from January to December annually. This discrepancy in the timeframes means that the population figures may not accurately reflect the true population at the time of each death.\n\nFuture Directions\n\nIntra-State Analysis: While the project covered variations within states, such as urban vs. rural differences could be further explored.\nGlobal Comparison: Expanding the analysis to include other countries would allow for a better understanding of how different healthcare systems and policies have influenced COVID-19 outcomes.\nVaccine Impact Study: A study on the impact of vaccination on mortality rates, especially among older groups, could offer more insights for future public health initiatives.\n\nLessons Learned\nThroughout this exploration, we learned about the many contributors to COVID-19 death rate, namely age, geographical location, and conditions, and the interesting interaction effects between them, for example the prevalence of obesity in young age groups.\nThis exploration also unravelled patterns that we’ve never dwelt on before aobut COVID-19. For example, it seems reasonable to assume that COVID-19 will be more prevalent in states with a higher population density like New York, especially in the year when COVID-19 first broke out. Yet interestingly in 2021, the pattern of state-wise COVID-19 death features a shift between Northern and Southern states, where Northern states generally improve while Southern state aggravates. Whether this phenomenon is due to any shared public health practices and community awareness in Northern or Sourthern states requires future analysis.\nIt is interesting how the COVID-19 death counts of most conditions are positively correlated through time, suggesting the presence of comorbidity, which will be interesting for future analysis.\nLast but not least, we learned about how different visualization graphs can aid with analysis and interpretation of the topic in different ways. For example, time series line chart is adept at showing macroscopic trends, while interactive D3 graphs can depict the microscopic changes between 2 time periods with the aid of animation."
  }
]